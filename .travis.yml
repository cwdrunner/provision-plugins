language: go
go:
- '1.12'
git:
  depth: 500
sudo: false
install:
- "./tools/build.sh"
script:
- "./tools/test.sh"
- "./tools/publish.sh"
after_script:
- tools/notify.sh digitalrebar/provision-plugins
notifications:
  slack:
    secure: Imuptg78FWWZlGVb8LBuwn45CeMfnHgf+pXbftR8mSGFRsg08jw38MIRtw/MAET3RJsciwDXf22AkgM8WgZ+fcUbJI4MGn2IvnM40T/imc5deqlMn1QdE5HasWrrBwfyY7hDu8XBexit+2fmYLGGrHX2fsbvUJepT4xOV8MZbZWMYueoBuL2bxNRR+lhjqVsKMq+/8q4g7hsKxYOdStEOZQIM13qI8dbIIQK4cCPQGtdNMGlNSX0a/nEFZmxDKh3WILssZcRst7SW3QldYppJO21PcTmY/zCTLJ5b7izweLczDmV77ckv61X50B8iaarhwEMFYs9Icg8U69mAkbqeU5HsWy1d2VDPDG+QW32VMTU371pVEzsmBVzArSXvldULmRzYcA+9LoYb5P6LNbq2y7tdimETOElbkMyw53hnb4ZPiypLWlwusZibCxGsJMp41MgbxxaMKxUgrBsAY9nSBg/oj7ixditveXm5IjqBJXfFyxuxfvcxssT15AiqFI3z+Mpoarq233V7E/c0AwdYc/iJKPtW8DG2uSjb0EMIKopXjEi/tz8ykVQH1UbKww5PvGfzCw2mCNF+Bc925coTs8gwaU+XOnqQesggUheAmpaQhbdPGpNYecbLgtQ3kafEBllTrgLyTqISkXlDMZybItP1C8GrEEshGWSEzBAEGU=
env:
  global:
    secure: uKct013piqLk5OTiliVXfOD7cXwfHvcm9aWhc/oK6mVdllyB4scGJX6FoB/Gx6roGLVncoUtrQcf8lnmrT3XS/Rqr2UQABaj3bCZg1r9jKxpgvC8zzM9HanrH07QjiQ1ervuzBnI+NhMgCHCECHPp0cr8Fn24SkWxF60LKTsxAXlpB1lQdNgBnehtZurfIRFVaDWQ1Y38lLmKt4T6ex9nEMPrnJIYbBAd0ah71zqs4aUZ7BiK3rnag8hj7BcCIHfweAF5zNlgFzEAz6h35PSdYXESNFRL8U3td6/dIHXX0ludO2tkAvLR99MecCVQeLrEshZS7tkyGyxnK46of/Ei8bCOQBzP2yyITCI2nWU6nYRJaTYcAoUx4Bg4QDYvUQRHEJ4L3EXv4Kj10GvbAtWhRW/xHwGEz3Uq0U39ymt+eT86m1+1Ag4kGnIqOyUWsmbMG7vafhBiV8xlvuTHgBLNCc7mfzja9Hq43ByeQANTDEdZW2R9UPW4tai5LVIV56RXgr3zXd0QNxmvagnqytVhmzO0BQBDr2C+AJTT2lw8qSeDk6T7xJtg5oqEAWGaeaCoWZA3XytYU01nfHKR5JnYJmER97RzlIY4MNJ2qM2iJpqe1/yp2mdJUyT0HnnFNJN684ANqhvvm7cEcFVwmWHuksWV7UdTnf4anLjUU7hyBY=
deploy:
- provider: s3
  access_key_id: AKIAJY25W4N3CA7NRHJQ
  secret_access_key:
    secure: sFgGfGS54LxyrMyP416XL/KhBw5oIfYG3A3pCDrCNGNveknzItR8hywuY0i06Ac/SFOLQUhlNTxzpHtIoCTi6dDZM/EUWo+5DJ15doU42CY++TwEATQrnN8w3JQIDng9IW3loY7h76pi999PMX4VKOBxNwcMp7n441s0eQ/Y4tBIgNIgkLHJesWxrf72eUbn0FdSoJ2H/U6/WZOzfJt7nwsswKzZ+le1RRanIXPRgYulmzo94G1S6jkKhq03lvvtem2QbkbPZGbnKPcrKrXZTF+Xx8Nr8pkr2OnFJTeHt0IMLP/Ub14KkV/xrFxsQzsa2axkjkLgtBeu7MOQzcOqGJg0mmHOjs6Pyrn8CvlDU2AqNwmfsTGGBKkOmngY6zwr02W9Mi9yQDY1Ri84nQ/gXtyP1SxJS9K72TCKjVIaN7DifQu/vajoIZwcYZ2n6KjEkNzj5i18RDVW0zTQWO/pU7JolgII/Vp+fWrMdvGu0m5/uFjjWC5fFCZRBoRfhw1sWvT+Y7MDQfsvkJJ86a6k3YSqxuirsndvy5FfskgqDJgrOK0AKcdMnloyTQOY6CE2t6mwRI1JpThHtaUq0gSZqsIVTjamW9cWg6QhlRe59bZFTu0YJi8NJKct49dHsQZOvs17AUZzyaiT9WZhxTME36KhCWMfT5TPNY+atUE52zQ=
  bucket: rebar-catalog
  region: us-west-2
  local-dir: rebar-catalog
  acl: public_read
  skip_cleanup: true
  on:
    repo: digitalrebar/provision-plugins
    branch: v4
- provider: s3
  access_key_id: AKIAJY25W4N3CA7NRHJQ
  secret_access_key:
    secure: sFgGfGS54LxyrMyP416XL/KhBw5oIfYG3A3pCDrCNGNveknzItR8hywuY0i06Ac/SFOLQUhlNTxzpHtIoCTi6dDZM/EUWo+5DJ15doU42CY++TwEATQrnN8w3JQIDng9IW3loY7h76pi999PMX4VKOBxNwcMp7n441s0eQ/Y4tBIgNIgkLHJesWxrf72eUbn0FdSoJ2H/U6/WZOzfJt7nwsswKzZ+le1RRanIXPRgYulmzo94G1S6jkKhq03lvvtem2QbkbPZGbnKPcrKrXZTF+Xx8Nr8pkr2OnFJTeHt0IMLP/Ub14KkV/xrFxsQzsa2axkjkLgtBeu7MOQzcOqGJg0mmHOjs6Pyrn8CvlDU2AqNwmfsTGGBKkOmngY6zwr02W9Mi9yQDY1Ri84nQ/gXtyP1SxJS9K72TCKjVIaN7DifQu/vajoIZwcYZ2n6KjEkNzj5i18RDVW0zTQWO/pU7JolgII/Vp+fWrMdvGu0m5/uFjjWC5fFCZRBoRfhw1sWvT+Y7MDQfsvkJJ86a6k3YSqxuirsndvy5FfskgqDJgrOK0AKcdMnloyTQOY6CE2t6mwRI1JpThHtaUq0gSZqsIVTjamW9cWg6QhlRe59bZFTu0YJi8NJKct49dHsQZOvs17AUZzyaiT9WZhxTME36KhCWMfT5TPNY+atUE52zQ=
  bucket: rebar-catalog
  region: us-west-2
  local-dir: rebar-catalog
  acl: public_read
  skip_cleanup: true
  on:
    repo: digitalrebar/provision-plugins
    tags: true
